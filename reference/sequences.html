<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8"/>
    <title>Clojure - Sequences</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Clojure の日本語ドキュメントです">
    <meta name="author" content="Japan Clojurians">
    <meta name="keywords" content="Clojure 日本語">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="../css/normalize.css" rel="stylesheet">
    <link href="../css/webflow.css" rel="stylesheet">
    <link href="../css/asciidoctor.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" type="image/x-icon" href="../images/clojure-logo-icon-32.png">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../">Clojure</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../about/rationale.html">概要</a></li>
            <li><a href="../reference/documentation">リファレンス</a></li>
            <!-- <li><a href="../api/api.html">API</a></li>
              <li><a href="../community/downloads.html">リリース</a></li> -->
              <li><a href="../guides/guides.html">ガイド</a></li>
            <!-- <li><a href="../community/resources.html">コミュニティ</a></li>
              <li><a href="../news/news.html">ニュース</a></li>
              <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Nav header</li>
              <li><a href="#">Separated link</a></li>
              <li><a href="#">One more separated link</a></li>
              </ul>
              </li> -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">

<div class="page-header">
  <h1>Sequences</h1>
</div>

<p><em></em></p>

<p><div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_the_seq_interface">The Seq interface</a>
<ul class="sectlevel2">
<li><a href="#__em_first_em_coll">(<em>first</em> coll)</a></li>
<li><a href="#__em_rest_em_coll">(<em>rest</em> coll)</a></li>
<li><a href="#__em_cons_em_item_seq">(<em>cons</em> item seq)</a></li>
</ul>
</li>
<li><a href="#_the_seq_library">The Seq library</a>
<ul class="sectlevel2">
<li><a href="#_seq_in_seq_out">Seq in, Seq out</a></li>
<li><a href="#_using_a_seq">Using a seq</a></li>
<li><a href="#_creating_a_seq">Creating a seq</a></li>
</ul>
</li>
</ul>
</div>
<div class="paragraph">
<p>Clojure defines many algorithms in terms of sequences (seqs). A seq is a logical list, and unlike most Lisps where the list is represented by a concrete, 2-slot structure, Clojure uses the ISeq interface to allow many data structures to provide access to their elements as sequences. The <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/seq">seq</a> function yields an implementation of ISeq appropriate to the collection. Seqs differ from iterators in that they are persistent and immutable, not stateful cursors into a collection. As such, they are useful for much more than foreach - functions can consume and produce seqs, they are thread safe, they can share structure etc.</p>
</div>
<div class="paragraph">
<p>Most of the sequence library functions are <em>lazy</em>, i.e. functions that return seqs do so incrementally, as they are consumed, and thus consume any seq arguments incrementally as well. Functions returning lazy seqs can be implemented using the <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/lazy-seq">lazy-seq</a> macro. See also <a href="lazy">lazy</a>.</p>
</div>
<div class="paragraph">
<p>When <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/seq">seq</a> is used on objects that implement Iterable, the resulting sequence is still immutable and persistent, and will represent a single pass across the data. Because that pass might happen lazily, the pass might see changes that happen after <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/seq">seq</a> has been called. Also, if the backing iterator is subject to ConcurrentModificationException, then so too is the resulting seq. When seq is used on native Java arrays, changes to the underlying array will be reflected in the seq - you must copy the source array to get full immutability. That said, there is still a lot of utility to using seq on Iterables and arrays since seqs support multi-pass and lazy algorithms. Robust programs should not mutate arrays or Iterables that have seqs on them.</p>
</div>
<div class="paragraph">
<p>Many of the functions in the seq library take one or more collections, call <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/seq">seq</a> on them, and then operate on the resulting seq. In other words, many of these functions take collections but operate on their seqs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_seq_interface">The Seq interface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="__em_first_em_coll">(<em>first</em> coll)</h3>
<div class="paragraph">
<p>Returns the first item in the collection. Calls seq on its argument. If coll is nil, returns nil.</p>
</div>
</div>
<div class="sect2">
<h3 id="__em_rest_em_coll">(<em>rest</em> coll)</h3>
<div class="paragraph">
<p>Returns a sequence of the items after the first. Calls seq on its argument. If there are no more items, returns a logical sequence for which <strong>seq</strong> returns nil.</p>
</div>
</div>
<div class="sect2">
<h3 id="__em_cons_em_item_seq">(<em>cons</em> item seq)</h3>
<div class="paragraph">
<p>Returns a new seq where item is the first element and seq is the rest.</p>
</div>
<div class="paragraph">
<p>For a discussion of <strong>rest</strong> vs. <strong>next</strong> and <strong>lazy-seq</strong> see <a href="lazy">lazy</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_seq_library">The Seq library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a sampling of the primary sequence functions, grouped broadly by their capabilities. Some functions can be used in different ways and so appear in more than one group. There are many more listed in the <a href="https://clojure.github.io/clojure/">API</a> section.</p>
</div>
<div class="paragraph">
<p>Since Clojure 1.7, Clojure also provides <a href="transducers">transducers</a>, an alternate model for composable transformations on collections. Transducers decouple the input, processing, and output parts of transformation and allow reuse of transformations in more contexts, such as core.async channels. Many of the sequence functions in the list below will create transducers if the input collection is omitted. See the Transducers page for more details.</p>
</div>
<div class="sect2">
<h3 id="_seq_in_seq_out">Seq in, Seq out</h3>
<div class="paragraph">
<p>Shorter seq from a longer seq: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/distinct">distinct</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/filter">filter</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/remove">remove</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/for">for</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/keep">keep</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/keep-indexed">keep-indexed</a><br>
Longer seq from a shorter seq: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/cons">cons</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/concat">concat</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/lazy-cat">lazy-cat</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/mapcat">mapcat</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/cycle">cycle</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/interleave">interleave</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/interpose">interpose</a><br>
Seq with head-items missing: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/rest">rest</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/next">next</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/fnext">fnext</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/nnext">nnext</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/drop">drop</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/drop-while">drop-while</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/nthnext">nthnext</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/for">for</a><br>
Seq with tail-items missing: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/take">take</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/take-nth">take-nth</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/take-while">take-while</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/butlast">butlast</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/drop-last">drop-last</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/for">for</a><br>
Rearrangment of a seq: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/flatten">flatten</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/reverse">reverse</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/sort">sort</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/sort-by">sort-by</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/shuffle">shuffle</a><br>
Create nested seqs: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/split-at">split-at</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/split-with">split-with</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/partition">partition</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/partition-all">partition-all</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/partition-by">partition-by</a><br>
Process each item of a seq to create a new seq: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/map">map</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/pmap">pmap</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/mapcat">mapcat</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/for">for</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/replace">replace</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/reductions">reductions</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/map-indexed">map-indexed</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/seque">seque</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_seq">Using a seq</h3>
<div class="paragraph">
<p>Extract a specific-numbered item from a seq: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/first">first</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/ffirst">ffirst</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/nfirst">nfirst</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/second">second</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/nth">nth</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/when-first">when-first</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/last">last</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/rand-nth">rand-nth</a><br>
Construct a collection from a seq: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/zipmap">zipmap</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/into">into</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/reduce">reduce</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/set">set</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/vec">vec</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/into-array">into-array</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/to-array-2d">to-array-2d</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/frequencies">frequencies</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/group-by">group-by</a><br>
Pass items of a seq as arguments to a function: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/apply">apply</a><br>
Compute a boolean from a seq: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/not-empty">not-empty</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/some">some</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/reduce">reduce</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/seq?">seq?</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/every?">every?</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/not-every?">not-every?</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/not-any?">not-any?</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/empty?">empty?</a><br>
Search a seq using a predicate: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/some">some</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/filter">filter</a><br>
Force evaluation of lazy seqs: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/doseq">doseq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/dorun">dorun</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/doall">doall</a><br>
Check if lazy seqs have been forcibly evaluated: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/realized?">realized?</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_seq">Creating a seq</h3>
<div class="paragraph">
<p>Lazy seq from collection: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/seq">seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/vals">vals</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/keys">keys</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/rseq">rseq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/subseq">subseq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/rsubseq">rsubseq</a><br>
Lazy seq from producer function: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/lazy-seq">lazy-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/repeatedly">repeatedly</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/iterate">iterate</a><br>
Lazy seq from constant: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/repeat">repeat</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/range">range</a><br>
Lazy seq from other objects: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/line-seq">line-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/resultset-seq">resultset-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/re-seq">re-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/tree-seq">tree-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/file-seq">file-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/xml-seq">xml-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/iterator-seq">iterator-seq</a> <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/enumeration-seq">enumeration-seq</a></p>
</div>
</div>
</div>
</div></p>

<hr />

		</div>
		<div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
      </div>
    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery-1.11.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/prettify.js"></script>

  </body>
</html>