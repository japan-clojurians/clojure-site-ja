<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8"/>
    <title>Clojure - Reading Clojure Characters</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Clojure の日本語ドキュメントです">
    <meta name="author" content="Japan Clojurians">
    <meta name="keywords" content="Clojure 日本語">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="../css/normalize.css" rel="stylesheet">
    <link href="../css/webflow.css" rel="stylesheet">
    <link href="../css/asciidoctor.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" type="image/x-icon" href="../images/clojure-logo-icon-32.png">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../">Clojure</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../about/rationale">概要</a></li>
            <li><a href="../reference/documentation">リファレンス</a></li>
            <!-- <li><a href="../api/api">API</a></li>
              <li><a href="../community/downloads">リリース</a></li> -->
              <li><a href="../guides/guides">ガイド</a></li>
            <!-- <li><a href="../community/resources">コミュニティ</a></li>
              <li><a href="../news/news">ニュース</a></li>
              <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Nav header</li>
              <li><a href="#">Separated link</a></li>
              <li><a href="#">One more separated link</a></li>
              </ul>
              </li> -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">

<div class="page-header">
  <h1>Reading Clojure Characters</h1>
</div>

<p><em></em></p>

<p><div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#lists"><code>( &#8230;&#8203; )</code> - List</a></li>
<li><a href="#vectors"><code>[ &#8230;&#8203; ]</code> - Vector</a></li>
<li><a href="#maps"><code>{ &#8230;&#8203; }</code> - Map</a></li>
<li><a href="#dispatch"><code>#</code> - Dispatch character</a></li>
<li><a href="#_set"><code>#{ &#8230;&#8203; }</code> - Set</a></li>
<li><a href="#_discard"><code>#_</code> - Discard</a></li>
<li><a href="#_regular_expression"><code>#"&#8230;&#8203;"</code> - Regular Expression</a></li>
<li><a href="#_anonymous_function"><code>#(&#8230;&#8203;)</code> - Anonymous function</a></li>
<li><a href="#_var_quote"><code>#'</code> - Var quote</a></li>
<li><a href="#tagged_literals"><code>#inst</code>, <code>#uuid</code>, and <code>#js</code> etc. - tagged literals</a></li>
<li><a href="#_n_anonymous_function_arguments"><code>%</code>, <code>%n</code>, <code>%&amp;</code> - Anonymous function arguments</a></li>
<li><a href="#_deref"><code>@</code> - Deref</a></li>
<li><a href="#_and_metadata"><code>^</code> (and <code>#^</code>) - Metadata</a></li>
<li><a href="#_quote"><code>'</code> - Quote</a></li>
<li><a href="#_comment"><code>;</code> - Comment</a></li>
<li><a href="#_keyword"><code>:</code> - Keyword</a></li>
<li><a href="#autoresolved_keys"><code>::</code> - Auto-resolved keyword</a></li>
<li><a href="#_and_namespace_map_syntax"><code>#:</code> and <code>#::</code> - Namespace Map Syntax</a></li>
<li><a href="#_namespace_separator"><code>/</code> - Namespace separator</a></li>
<li><a href="#_character_literal"><code>\</code> - Character literal</a></li>
<li><a href="#_inner_class_reference"><code>$</code> - Inner class reference</a></li>
<li><a href="#_some_cond_as_etc_threading_macros"><code>-></code>, <code>->></code>, <code>some-></code>, <code>cond-></code>, <code>as-></code> etc. - Threading macros</a></li>
<li><a href="#syntax_quote"><code>`</code> - Syntax quote</a></li>
<li><a href="#unqote"><code>~</code> - Unquote</a></li>
<li><a href="#unquote_splicing"><code>~@</code> - Unquote splicing</a></li>
<li><a href="#gensym"><code>&lt;symbol&gt;#</code> - Gensym</a></li>
<li><a href="#_reader_conditional"><code>#?</code> - Reader conditional</a></li>
<li><a href="#_splicing_reader_conditional"><code>#?@</code> - Splicing Reader conditional</a></li>
<li><a href="#_var_name_earmuffs"><code>*var-name*</code> - "Earmuffs"</a></li>
<li><a href="#_and_core_async_channel_macros"><code>&gt;!!</code>, <code>&lt;!!</code>, <code>&gt;!</code>, and <code>&lt;!</code> - core.async channel macros</a></li>
<li><a href="#_symbol_predicate_suffix"><code>&lt;symbol&gt;?</code> - Predicate Suffix</a></li>
<li><a href="#_symbol_unsafe_operations"><code>&lt;symbol&gt;!</code> - Unsafe Operations</a></li>
<li><a href="#_unused_argument"><code>_</code> - Unused argument</a></li>
<li><a href="#_whitespace_character"><code>,</code> - Whitespace character</a></li>
<li><a href="#_reader_eval"><code>#=</code> Reader eval</a></li>
</ul>
</div>
<div class="paragraph">
<p>This page explains the Clojure syntax for characters that are difficult to "google".
Sections are not in any particular order, but related items
are grouped for ease.
Please refer to <a href="xref/../../reference/reader">the reader reference page</a>
as the authoritative reference on the Clojure reader.
This guide is based on <a href="http://twitter.com/kouphax">James Hughes</a>
original <a href="https://yobriefca.se/blog/2014/05/19/the-weird-and-wonderful-characters-of-clojure/">blog post</a> and has been updated and expanded here with the permission of the author.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lists"><a class="anchor" href="#lists"></a><code>( &#8230;&#8203; )</code> - List</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lists are sequential heterogeneous collections implemented as a linked list.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/data_structures#Lists">Clojure Documentation: Lists</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A list of three values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(1 "two" 3.0)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vectors"><a class="anchor" href="#vectors"></a><code>[ &#8230;&#8203; ]</code> - Vector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vectors are sequential, indexed, heterogeneous collections. Indexing is 0-based.</p>
</div>
<div class="paragraph">
<p>An example of retrieving the value at index 1 in a vector of three values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (get ["a" 13.7 :foo] 1)
13.7</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/data_structures#Vectors">Clojure Documentation: Vectors</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maps"><a class="anchor" href="#maps"></a><code>{ &#8230;&#8203; }</code> - Map</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maps are heterogeneous collections specified with alternating keys and values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (keys {:a 1 :b 2})
(:a :b)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/data_structures#Maps">Clojure Documentation: Maps</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dispatch"><a class="anchor" href="#dispatch"></a><code>#</code> - Dispatch character</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll see this character beside another e.g. <code>#(</code> or <code>#"</code>.</p>
</div>
<div class="paragraph">
<p><code>#</code> is a special character that tells the Clojure reader (the component that takes Clojure
source and "reads" it as Clojure data) how to interpret the next character using a <em>read table</em>. Although some Lisps allow the read table to be extended by users, Clojure <a href="faq#reader_macros">does not</a>.</p>
</div>
<div class="paragraph">
<p>The <code>#</code> is also used at the <em>end</em> of a symbol when creating  <a href="xref/../weird_characters#gensym">generated symbols</a> inside a syntax quote.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_set"><a class="anchor" href="#_set"></a><code>#{ &#8230;&#8203; }</code> - Set</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="xref/../weird_characters#dispatch"><code>#</code></a> for additional details.</p>
</div>
<div class="paragraph">
<p><code>#{&#8230;&#8203;}</code> defines a set (a collection of unique values), specifically a <code>hash-set</code>. The
following are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; #{1 2 3 4}
#{1 2 3 4}
user=&gt; (hash-set 1 2 3 4)
#{1 2 3 4}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets cannot contain duplicates and thus the <code>set</code> reader will throw an exception in this case as it is an invalid literal. When items are added to a set, they are simply dropped if the value is already present.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; #{1 2 3 4 1}

IllegalArgumentException Duplicate key: 1  clojure.lang.PersistentHashSet.createWithCheck (PersistentHashSet.java:68)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/data_structures#sets">Clojure Documentation: Sets</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discard"><a class="anchor" href="#_discard"></a><code>#_</code> - Discard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="xref/../weird_characters#dispatch"><code>#</code></a> for additional details.</p>
</div>
<div class="paragraph">
<p><code>#_</code> tells the reader to ignore the next form completely.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; [1 2 3 #_ 4 5]
[1 2 3 5]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the space following <code>#_</code> is optional, so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; [1 2 3 #_4 5]
[1 2 3 5]</code></pre>
</div>
</div>
<div class="paragraph">
<p>also works. Also note that the discard character works in edn.</p>
</div>
<div class="paragraph">
<p>A neat trick is that multiple <code>#_</code> can be stacked to omit multiple forms</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; {:a 1, #_#_ :b 2, :c 3}
{:a 1, :c 3}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The docs suggest that "The form following <code>#_</code> is completely skipped by the reader
(This is a more complete removal than the <code>comment</code> macro which yields <code>nil</code>).".
This can prove useful for debugging situations or for multiline comments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/reader">Clojure Documentation - Reader</a></p>
</li>
<li>
<p><a href="https://github.com/edn-format/edn#tagged-elements">edn Tagged Elements</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_regular_expression"><a class="anchor" href="#_regular_expression"></a><code>#"&#8230;&#8203;"</code> - Regular Expression</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="xref/../weird_characters#dispatch"><code>#</code></a> for additional details.</p>
</div>
<div class="paragraph">
<p><code>#"</code> indicates the start of a regular expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (re-matches #"^test$" "test")
"test"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This form is compiled at <em>read time</em> into a host-specific regex machinery, but
it is not available in edn. Note that when using regexes in Clojure,
Java string escaping is not required</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/other_functions#regex">Clojure Documentation: Regex Support</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">Java Regex</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anonymous_function"><a class="anchor" href="#_anonymous_function"></a><code>#(&#8230;&#8203;)</code> - Anonymous function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="xref/../weird_characters#dispatch"><code>#</code></a> for additional details.</p>
</div>
<div class="paragraph">
<p><code>#(</code> begins the short hand syntax for an inline function definition. The
following two snippets of code are similar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">; anonymous function taking a single argument and printing it
(fn [line] (println line))

; anonymous function taking a single argument and printing it - shorthand
#(println %)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reader expands an anonymous function into a function definition whose
arity (the number of arguments it takes) is defined by how the <code>%</code> placeholders
are declared. See the <code>%</code> character for discussion around arity.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (macroexpand `#(println %))
(fn* [arg] (clojure.core/println arg)) ; argument names shortened for clarity</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_var_quote"><a class="anchor" href="#_var_quote"></a><code>#'</code> - Var quote</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>#'</code> is the var quote which expands into a call to the <code>var</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (read-string "#'foo")
(var foo)
user=&gt; (def nine 9)
#'user/nine
user=&gt; nine
9
user=&gt; (var nine)
#'user/nine
user=&gt; #'nine
#'user/nine</code></pre>
</div>
</div>
<div class="paragraph">
<p>When used it will attempt to return the referenced var. This is useful when
you want to talk about the reference/declaration instead of the value it represents.
See the use of <code>meta</code> in the metadata (<a href="xref/../weird_characters#metadata"><code>^</code></a>) discussion.</p>
</div>
<div class="paragraph">
<p>Note that var quote is not available in edn.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/special_forms#var">Clojure Official Documentation: Special Forms</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tagged_literals"><a class="anchor" href="#tagged_literals"></a><code>#inst</code>, <code>#uuid</code>, and <code>#js</code> etc. - tagged literals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tagged literals are defined in edn and supported by the Clojure and
ClojureScript readers natively. The <code>#inst</code> and <code>#uuid</code> tags are defined by edn,
whereas the #js tag is defined by ClojureScript.</p>
</div>
<div class="paragraph">
<p>We can use Clojure&#8217;s <code>read-string</code> to read a tagged literal (or use it directly):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (type #inst "2014-05-19T19:12:37.925-00:00")
java.util.Date ;; this is host dependent
(read-string "#inst \"2014-05-19T19:12:37.925-00:00\"")
#inst "2014-05-19T19:12:37.925-00:00"</code></pre>
</div>
</div>
<div class="paragraph">
<p>A tagged literal tells the reader how to parse the literal value. Other common
uses include <code>#uuid</code> for expressing UUIDs and in the ClojureScript world an
extremely common use of tagged literals is <code>#js</code> which can be used to convert
ClojureScript data structures into JavaScript structures directly. Note that
<code>#js</code> doesn&#8217;t convert recursively, so if you have a nested data-structure, use
<a href="https://cljs.github.io/api/cljs.core/js-GTclj"><code>js->clj</code></a>.</p>
</div>
<div class="paragraph">
<p>Note that while <code>#inst</code> and <code>#uuid</code> are available in edn, <code>#js</code> is not.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/edn-format/edn#tagged-elements">edn Tagged Elements</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_n_anonymous_function_arguments"><a class="anchor" href="#_n_anonymous_function_arguments"></a><code>%</code>, <code>%n</code>, <code>%&amp;</code> - Anonymous function arguments</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>%</code> is an argument in an anonymous function <code><mark>(&#8230;&#8203;)</code> as in <code></mark>(* % %)</code>.</p>
</div>
<div class="paragraph">
<p>When an anonymous function is expanded, it becomes an <code>fn</code> form and <code>%</code> args are replaced with gensym&#8217;ed names
(here we use arg1, etc for readability):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (macroexpand `#(println %))
(fn* [arg1] (clojure.core/println arg1))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Numbers can be placed directly after the <code>%</code> to indicate the argument positions (1-based).
Anonymous function arity is determined based on the highest number <code>%</code> argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (macroexpand `#(println %1 %2))
(fn* [arg1 arg2] (clojure.core/println arg1 arg2)) ; takes 2 args

user=&gt; (macroexpand `#(println %4))
(fn* [arg1 arg2 arg3 arg4] (clojure.core/println arg4)) ; takes 4 args doesn't use 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>You don&#8217;t have to use the arguments, but you do need to declare them in the order
you&#8217;d expect an external caller to pass them in.</p>
</div>
<div class="paragraph">
<p><code>%</code> and <code>%1</code> can be used interchangeably:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (macroexpand `#(println % %1)) ; use both % and %1
(fn* [arg1] (clojure.core/println arg1 arg1)) ; still only takes 1 argument</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is also <code>%&amp;</code> which is the symbol used in a variadic anonymous function
to represent the "rest" of the arguments (after the highest named anonymous
argument).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (macroexpand '#(println %&amp;))
(fn* [&amp; rest__11#] (println rest__11#))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Anonymous functions and <code>%</code> are not part of edn.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deref"><a class="anchor" href="#_deref"></a><code>@</code> - Deref</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>@</code> expands into a call to the <code>deref</code> function, so these two forms
are the same:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def x (atom 1))
#'user/x
user=&gt; @x
1
user=&gt; (deref x)
1
user=&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@</code> is used to get the current value of a reference. The above example uses
<code>@</code> to get the current value of an <a href="xref/../../reference/atom">atom</a>, but <code>@</code> can
be applied to other things such as <code>future</code> s, <code>delay</code> s, <code>promises</code> s etc. to
force computation and potentially block.</p>
</div>
<div class="paragraph">
<p>Note that <code>@</code> is not available in edn.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_and_metadata"><a class="anchor" href="#_and_metadata"></a><code>^</code> (and <code>#^</code>) - Metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>^</code> is the metadata marker. Metadata is a map of values (with shorthand option)
that can be attached to various forms in Clojure. This provides extra information
for these forms and can be used for documentation, compilation warnings,
typehints, and other features.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def ^{:debug true} five 5) ; meta map with single boolean value
#'user/five</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can access the metadata by the <code>meta</code> function which should be executed
against the declaration itself (rather than the returned value):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def ^{:debug true} five 5)
#'user/five
user=&gt; (meta #'five)
{:ns #&lt;Namespace user&gt;, :name five, :column 1, :debug true, :line 1, :file "NO_SOURCE_PATH"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we have a single value here, we can use a shorthand notation for declaring
the metadata <code>^:name</code> which is useful for flags, as the value will be set to true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def ^:debug five 5)
#'user/five
user=&gt; (meta #'five)
{:ns #&lt;Namespace user&gt;, :name five, :column 1, :debug true, :line 1, :file "NO_SOURCE_PATH"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another use of <code>^</code> is for type hints. These are used to tell the compiler what
type the value will be and allow it to perform type specific optimizations
thus potentially making resultant code faster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def ^Integer five 5)
#'user/five
user=&gt; (meta #'five)
{:ns #&lt;Namespace user&gt;, :name five, :column 1, :line 1, :file "NO_SOURCE_PATH", :tag java.lang.Integer}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can see in that example the <code>:tag</code> property is set.</p>
</div>
<div class="paragraph">
<p>You can also stack the shorthand notations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def ^Integer ^:debug ^:private five 5)
#'user/five
user=&gt; (meta #'five)
{:ns #&lt;Namespace user&gt;, :name five, :column 1, :private true, :debug true, :line 1, :file "NO_SOURCE_PATH", :tag java.lang.Integer}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Originally, meta was declared with <code>#^</code>, which is now deprecated (but still works). Later, this was simplified to just <code>^</code> and that is what you will see in most Clojure, but occasionally you will encounter the <code>#^</code> syntax in older code.</p>
</div>
<div class="paragraph">
<p>Note that metadata is available in edn, but type hints are not.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/metadata">Clojure Official Documentation</a></p>
</li>
<li>
<p><a href="http://en.wikibooks.org/wiki/Learning_Clojure/Meta_Data">Learning Clojure: Meta Data</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quote"><a class="anchor" href="#_quote"></a><code>'</code> - Quote</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quoting is used to indicate that the next form should be read but not evaluated.
The reader expands <code>'</code> into a call to the <code>quote</code> special form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (1 3 4) ; fails as it tries to invoke 1 as a function

ClassCastException java.lang.Long cannot be cast to clojure.lang.IFn  user/eval925 (NO_SOURCE_FILE:1)
user=&gt; '(1 3 4) ; quote
(1 3 4)
user=&gt; (quote (1 2 3)) ; using the longer quote method
(1 2 3)
user=&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/special_forms#quote">Clojure Special Forms</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comment"><a class="anchor" href="#_comment"></a><code>;</code> - Comment</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>;</code> starts a line comment and ignores all input from its starting point to the end of the
line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def x "x") ; this is a comment
#'user/x
user=&gt; ; this is a comment too
&lt;returns nothing&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is common in Clojure to use multiple semicolons for readability or emphasis,
but these are all the same to Clojure</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">;; This is probably more important than

; this</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keyword"><a class="anchor" href="#_keyword"></a><code>:</code> - Keyword</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>:</code> is the indicator for a keyword. Keywords are often used as keys in maps and
they provide faster comparisons and lower memory overhead than strings (because instances are cached and reused).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (type :test)
clojure.lang.Keyword</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can use the <code>keyword</code> function to create a keyword from a string</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (keyword "test")
:test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Keywords can also be invoked as functions to look themselves up as a key in a map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def my-map {:one 1 :two 2})
#'user/my-map
user=&gt; (:one my-map) ; get the value for :one by invoking it as function
1
user=&gt; (:three my-map) ; it can safely check for missing keys
nil
user=&gt; (:three my-map 3) ; it can return a default if specified
3
user =&gt; (get my-map :three 3) ; same as above, but using get
3</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/data_structures#Keywords">Data Structures - Keywords</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="autoresolved_keys"><a class="anchor" href="#autoresolved_keys"></a><code>::</code> - Auto-resolved keyword</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>::</code> is used to auto-resolve a keyword in the current namespace. If no qualifier
is specified, it will auto-resolve to the current namespace. If a qualifier is
specified, it may use aliases in the current namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; :my-keyword
:my-keyword
user=&gt; ::my-keyword
:user/my-keyword
user=&gt; (= ::my-keyword :my-keyword)
false</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is useful when creating macros. If you want to ensure that a macro that calls
another function in the macro namespace correctly expands to call the function,
you could use <code>::my-function</code> to refer to the fully qualified name.</p>
</div>
<div class="paragraph">
<p>Note that <code>::</code> is not available in edn.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/reader">Reader</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_and_namespace_map_syntax"><a class="anchor" href="#_and_namespace_map_syntax"></a><code>#:</code> and <code>#::</code> - Namespace Map Syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Namespace map syntax was added in Clojure 1.9 and is used to specify a default
namespace context for keys in a map, where those keywords (or symbols) share a
common namespace.</p>
</div>
<div class="paragraph">
<p><code>#::</code> can be used to auto-resolve the namespace of keyword or symbol keys
in a map using the current namespace.</p>
</div>
<div class="paragraph">
<p>These two examples are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (keys {:user/a 1, :user/b 2})
(:user/a :user/b)
user=&gt; (keys #::{:a 1, :b 2})
(:user/a :user/b)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similar to <a href="xref/../weird_characters#autoresolved_keys">autoresolved keywords</a>,
you can also specify an alias in the namespace map prefix with
<code>#:ns</code> prefix, where <em>ns</em> is the name of a namespace and the prefix
precedes the opening brace <code>{</code> of the map.</p>
</div>
<div class="paragraph">
<p>For example, the following map literal with namespace syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">#:person{:first "Han"
         :last "Solo"
         :ship #:ship{:name "Millennium Falcon"
                      :model "YT-1300f light freighter"}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is read as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">{:person/first "Han"
 :person/last "Solo"
 :person/ship {:ship/name "Millennium Falcon"
               :ship/model "YT-1300f light freighter"}}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/reader#map_namespace_syntax">Reader</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_namespace_separator"><a class="anchor" href="#_namespace_separator"></a><code>/</code> - Namespace separator</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>/</code> can be the division function <code>clojure.core//</code>, but can also act as a
separator in a symbol name to separate a symbol&#8217;s name and namespace qualifier, e.g. <code>my-namespace/utils</code>. Namespace qualifiers can thus prevent naming collisions
for simple names.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../reference/reader">Reader</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_character_literal"><a class="anchor" href="#_character_literal"></a><code>\</code> - Character literal</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>\</code> indicates a literal character as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (str \h \i)
"hi"</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are also a small number of special characters to name special ASCII characters: <code>\newline</code>, <code>\space</code>, <code>\tab</code>, <code>\formfeed</code>, <code>\backspace</code>, and <code>\return</code>.</p>
</div>
<div class="paragraph">
<p>The <code>\</code> can also be followed by a Unicode literal of the form <code>\uNNNN</code>. For example, <code>\u03A9</code> is the literal for Ω.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inner_class_reference"><a class="anchor" href="#_inner_class_reference"></a><code>$</code> - Inner class reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Used to reference inner classes and interfaces in Java. Separates the
container class name and the inner class name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(import (basex.core BaseXClient$EventNotifier)

(defn- build-notifier [notifier-action]
  (reify BaseXClient$EventNotifier
    (notify [this value]
      (notifier-action value))))</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>EventNotifier</code> is an inner interface of the <code>BaseXClient</code> class which is an
imported Java class</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://blog.jayfields.com/2011/01/clojure-using-java-inner-classes.html">Clojure: Using Java Inner Classes</a></p>
</li>
<li>
<p><a href="xref/../../reference/java_interop">Official Documentation</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_some_cond_as_etc_threading_macros"><a class="anchor" href="#_some_cond_as_etc_threading_macros"></a><code>-></code>, <code>->></code>, <code>some-></code>, <code>cond-></code>, <code>as-></code> etc. - Threading macros</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These are threading macros. Please refer to <a href="xref/../threading_macros">Official Clojure Documentation</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://blog.fogus.me/2009/09/04/understanding-the-clojure-macro/">Understanding the Clojure -&gt; macro</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syntax_quote"><a class="anchor" href="#syntax_quote"></a><code>`</code> - Syntax quote</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>`</code> is the syntax quote. Syntax quote is similar to quoting (to delay
evaluation) but has some additional effects.</p>
</div>
<div class="paragraph">
<p>Basic syntax quote may look similar to normal quoting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (1 2 3)
ClassCastException java.lang.Long cannot be cast to clojure.lang.IFn  user/eval832 (NO_SOURCE_FILE:1)
user=&gt; `(1 2 3)
(1 2 3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, symbols used within a syntax quote are fully resolved with respect to the
current namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def five 5)
#'user/five
user=&gt; `five
user/five</code></pre>
</div>
</div>
<div class="paragraph">
<p>Syntax quote is most used as a "template" mechanism within macros. We can write one now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (defmacro debug [body]
  #_=&gt;   `(let [val# ~body]
  #_=&gt;      (println "DEBUG: " val#)
  #_=&gt;      val#))
#'user/debug
user=&gt; (debug (+ 2 2))
DEBUG:  4
4</code></pre>
</div>
</div>
<div class="paragraph">
<p>Macros are functions invoked by the compiler with code as data. They are expected
to return code (as data) that can be further compiled and evaluated.
This macro takes a single body expression and returns a <code>let</code> form that will
evaluate the body, print its value, and then return the value. Here the syntax
quote creates a list, but does not evaluate it. That list is actually code.</p>
</div>
<div class="paragraph">
<p>See <a href="xref/../weird_characters#unquote_splicing"><code>~@</code></a> and <a href="xref/../weird_characters#unquote"><code>~</code></a> for additional syntax allowed only within syntax quote.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.braveclojure.com/writing-macros/">Clojure for the Brave and True - Writing Macros</a></p>
</li>
<li>
<p><a href="http://aphyr.com/posts/305-clojure-from-the-ground-up-macros">Clojure from the ground up: macros</a></p>
</li>
<li>
<p><a href="xref/../../macros">Clojure Official Documentation</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="unqote"><a class="anchor" href="#unqote"></a><code>~</code> - Unquote</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="xref/../weird_characters#syntax_quote"><code>`</code></a> for additional information.</p>
</div>
<div class="paragraph">
<p><code>~</code> is unquote. That is within a syntax quoted <a href="xref/../weird_characters#syntax_quote"><code>`</code></a> form <code>~</code> will <em>unquote</em>
the associated symbol, i.e. evaluate it in the current context:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def five 5) ; create a named var with the value 5
#'user/five
user=&gt; five ; the symbol five is evaluated to its value
5
user=&gt; `five ; syntax quoting five will avoid evaluating the symbol, and fully resolve it
user/five
user=&gt; `~five ; within a syntax quoted block, ~ will turn evaluation back on just for the next form
5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Syntax quoting and unquote are essential tools for writing macros, which are functions invoked during compilation that take code and return code.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.braveclojure.com/writing-macros/">Clojure for the Brave and True - Writing Macros</a></p>
</li>
<li>
<p><a href="http://aphyr.com/posts/305-clojure-from-the-ground-up-macros">Clojure from the ground up: macros</a></p>
</li>
<li>
<p><a href="xref/../../macros">Clojure Official Documentation</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="unquote_splicing"><a class="anchor" href="#unquote_splicing"></a><code>~@</code> - Unquote splicing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="xref/../weird_characters#syntax_quote"><code>`</code></a> and <a href="xref/../weird_characters#unquote"><code>~</code></a> for additional information.</p>
</div>
<div class="paragraph">
<p><code>~@</code> is unquote-splicing. Where unquote <a href="xref/../weird_characters#unquote">(<code>~</code>)</a>
evaluates a form and places the result into the quoted result, <code>~@</code> expects the
evaluated value to be a collection and splices the <em>contents</em> of that
collection into the quoted result.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def three-and-four (list 3 4))
#'user/three-and-four
user=&gt; `(1 ~three-and-four) ; evaluates `three-and-four` and places it in the result
(1 (3 4))
user=&gt; `(1 ~@three-and-four) ;  evaluates `three-and-four` and places its contents in the result
(1 3 4)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, this is a powerful tool for writing macros.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.braveclojure.com/writing-macros/">Clojure for the Brave and True - Writing Macros</a></p>
</li>
<li>
<p><a href="http://aphyr.com/posts/305-clojure-from-the-ground-up-macros">Clojure from the ground up: macros</a></p>
</li>
<li>
<p><a href="xref/../../macros">Clojure Official Documentation</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gensym"><a class="anchor" href="#gensym"></a><code>&lt;symbol&gt;#</code> - Gensym</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>#</code> <em>at the end</em> of a symbol is used to automatically generate a new symbol.
This is useful inside macros to keep macro specifics from leaking into the
userspace. A regular <code>let</code> will fail in a macro definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (defmacro m [] `(let [x 1] x))
#'user/m
user=&gt; (m)
CompilerException java.lang.RuntimeException: Can't let qualified name: user/x, compiling:(NO_SOURCE_PATH:1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is because symbols inside a syntax quote are fully resolved, including the
local binding <code>x</code> here.</p>
</div>
<div class="paragraph">
<p>Instead you can append <code>#</code> to the end of the variable name and let Clojure
generate a unique (unqualified) symbol:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (defmacro m [] `(let [x# 1] x#))
#'user/m
user=&gt; (m)
1
user=&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Importantly, every time a particular <code>x#</code> is used within a single syntax quote, the <em>same</em> generated name will be used.</p>
</div>
<div class="paragraph">
<p>If we expand this macro, we can see the <code>gensym</code> 'd name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (macroexpand '(m))
(let* [x__681__auto__ 1] x__681__auto__)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://clojuredocs.org/clojure_core/clojure.core/gensym">ClojureDocs - gensyms</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reader_conditional"><a class="anchor" href="#_reader_conditional"></a><code>#?</code> - Reader conditional</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reader conditionals are designed to allow different dialects of Clojure
to share common code. The reader conditional behaves similarly to a traditional
<code>cond</code>. The syntax for usage is <code>#?</code> and looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">#?(:clj  (Clojure expression)
   :cljs (ClojureScript expression)
   :cljr (Clojure CLR expression)
   :default (fallthrough expression))</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../reader_conditionals">Reader conditonals</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_splicing_reader_conditional"><a class="anchor" href="#_splicing_reader_conditional"></a><code>#?@</code> - Splicing Reader conditional</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The syntax for a splicing reader conditional is <code>#?@</code>. It is used to splice
lists into the containing form. So the Clojure reader would read this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(defn build-list []
  (list #?@(:clj  [5 6 7 8]
            :cljs [1 2 3 4])))</code></pre>
</div>
</div>
<div class="paragraph">
<p>as this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(defn build-list []
  (list 5 6 7 8))</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../reader_conditionals">Reader conditonals</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_var_name_earmuffs"><a class="anchor" href="#_var_name_earmuffs"></a><code>*var-name*</code> - "Earmuffs"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Earmuffs (a pair of asterisk bookending var names) is a naming convention in
many LISPs used to denote <em>special vars</em>. Most commonly in Clojure this is
used to denote <em>dynamic</em> vars, i.e. ones that can change depending on
dynamic scope. The earmuffs act as a warning that "here be dragons"
and to never assume the state of the var. Remember, this is a convention, not a
rule.</p>
</div>
<div class="paragraph">
<p>Core Clojure examples include <code>*out*</code> and <code>*in*</code> which represent the standard in
and out streams for Clojure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://stackoverflow.com/questions/1986961/how-is-the-var-name-naming-convention-used-in-clojure">How is the var-name naming-convention used in clojure?</a></p>
</li>
<li>
<p><a href="http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/*out*">Clojure API Docs</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_and_core_async_channel_macros"><a class="anchor" href="#_and_core_async_channel_macros"></a><code>&gt;!!</code>, <code>&lt;!!</code>, <code>&gt;!</code>, and <code>&lt;!</code> - core.async channel macros</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These symbols are channel operations in <a href="https://github.com/clojure/core.async"><code>core.async</code></a>
- a Clojure/ClojureScript library for channel based asynchronous programming
(specifically <a href="http://en.wikipedia.org/wiki/Communicating_sequential_processes">CSP - Communicating Sequential Processes</a>).</p>
</div>
<div class="paragraph">
<p>If you imagine, for the sake of argument, a channel is a bit like a queue that
things can put stuff on and take stuff off, then these symbols support that
simple API.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&gt;!!</code> and <code>&lt;!!</code> are <em>blocking put</em> and <em>take</em> respectively</p>
</li>
<li>
<p><code>&gt;!</code> and <code>&lt;!</code> are, simply <em>put</em> and <em>take</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>THe difference being the blocking version operate outside <code>go</code> blocks and block
the thread they operate on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def my-channel (chan 10)) ; create a channel
user=&gt; (&gt;!! my-channel "hello")   ; put stuff on the channel
user=&gt; (println (&lt;!! my-channel)) ; take stuff off the channel
hello</code></pre>
</div>
</div>
<div class="paragraph">
<p>The non-blocking versions need to be executed within a <code>go</code> block, otherwise
they&#8217;ll throw an exception.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def c (chan))
#'user/c
user=&gt; (&gt;! c "nope")
AssertionError Assert failed: &gt;! used not in (go ...) block
nil  clojure.core.async/&gt;! (async.clj:123)</code></pre>
</div>
</div>
<div class="paragraph">
<p>While the difference between these is well outside the scope of this guide,
fundamentally the <code>go</code> blocks operate and manage their own resources pausing
<strong>execution</strong> of code without blocking threads. This makes asynchronously executed
code appear to be synchronous, removing the pain of managing
asynchronous code from the code base.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/clojure/core.async/blob/master/examples/walkthrough.clj">core.async Code Walkthrough</a></p>
</li>
<li>
<p><a href="https://github.com/clojure/core.async/wiki">core.async Wiki</a></p>
</li>
<li>
<p><a href="xref/../core_async_go">Go Block Best Practices</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symbol_predicate_suffix"><a class="anchor" href="#_symbol_predicate_suffix"></a><code>&lt;symbol&gt;?</code> - Predicate Suffix</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Putting <code>?</code> at the end of a symbol is a naming convention common across
many languages that support special characters in their symbol names. It is
used to indicate that the thing is a predicate, i.e. that it <em>poses a question</em>.
For example, imagine using an API that dealt with buffer manipulation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(def my-buffer (buffers/create-buffer [1 2 3]))
(buffers/empty my-buffer)</code></pre>
</div>
</div>
<div class="paragraph">
<p>At a glance, how would you know if the function <code>empty</code> in this case,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Returned <code>true</code> if the passed in buffer was empty, or,</p>
</li>
<li>
<p>Cleared the buffer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While the author could have renamed <code>empty</code> to <code>is-empty</code>, the richness of
symbol naming in Clojure allows us to express intent more symbolically.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(def my-buffer (buffers/create-buffer [1 2 3]))
(buffers/empty? my-buffer)
false</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is simply a recommended convention, not a requirement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/bbatsov/clojure-style-guide#naming">Clojure Style Guide</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symbol_unsafe_operations"><a class="anchor" href="#_symbol_unsafe_operations"></a><code>&lt;symbol&gt;!</code> - Unsafe Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/bbatsov/clojure-style-guide#changing-state-fns-with-exclamation-mark">The Clojure style guide has this to say</a>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The names of functions/macros that are not safe in STM transactions
should end with an exclamation mark (e.g <code>reset!</code>).</p>
</div>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll most commonly see this appended to function names whose purpose
is to mutate state, e.g. connecting to a data store, updating an atom or
closing a file stream</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (def my-stateful-thing (atom 0))
#'user/my-stateful-thing
user=&gt; (swap! my-stateful-thing inc)
1
user=&gt; @my-stateful-thing
1</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is simply a recommended convention and not a requirement.</p>
</div>
<div class="paragraph">
<p>Note that the exclamation mark is often pronounced as bang.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/bbatsov/clojure-style-guide#naming">Clojure Style Guide</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unused_argument"><a class="anchor" href="#_unused_argument"></a><code>_</code> - Unused argument</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you see the underscore character used as function arguments or in a <code>let</code> binding,
<code>_</code> is a common naming convention to indicate you won&#8217;t be using this argument.</p>
</div>
<div class="paragraph">
<p>This is an example using the <code>add-watch</code> function that can be used to add
callback style behaviour when atoms change value. Imagine, given an atom, we
want to print the new value every time it changes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(def value (atom 0))

(add-watch value nil (fn [_ _ _ new-value]
                       (println new-value))

(reset! value 6)
; prints 6
(reset! value 9)
; prints 9</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>add-watch</code> takes four arguments, but in our case we only really care about the
last argument - the new value of the atom so we use <code>_</code> for the others.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whitespace_character"><a class="anchor" href="#_whitespace_character"></a><code>,</code> - Whitespace character</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Clojure, <code>,</code> is treated as whitespace, exactly the same as spaces, tabs, or newlines.
Commas are thus never required in literal collections, but are often used to enhance
readability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt;(def m {:a 1, :b 2, :c 3}
{:a 1, :b 2, :c 3}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reader_eval"><a class="anchor" href="#_reader_eval"></a><code>#=</code> Reader eval</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>#=</code> allows the reader to evaluate an arbitrary form during read time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (read-string "#=(+ 3 4)")
;;=&gt; 7
#=123
;;=&gt; 123

#="foo"
;;=&gt; foo

(def foo 1)
#='foo
;;=&gt; 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the read-time evaluation can also cause side-effects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">user=&gt; (read-string "#=(println :foo)")
:foo
nil</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consequently, <code>read-string</code> is not safe to call with unverified user input.
For a safe alternative, see <a href="https://clojure.github.io/clojure/clojure.edn-api.html#clojure.edn/read-string"><code>clojure.edn/read-string</code></a>.</p>
</div>
<div class="paragraph">
<p>Note that <code>#=</code> is not an officially supported feature of the reader, so you
shouldn&#8217;t rely on its presence in future versions of Clojure.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Many thanks to everyone who has contributed ideas and [the copious amounts of]
spelling corrections (crikey I&#8217;m bad at speelingz - so thanks Michael R. Mayne,
lobsang_ludd). I&#8217;ve tried to call out people who have specifically asked for
things. Sorry if I&#8217;ve missed you.</p>
</div>
</div>
</div>
</div>
</div></p>

<hr />

		</div>
		<div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
      </div>
    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery-1.11.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/prettify.js"></script>

  </body>
</html>